---
import { horario } from '../data/horario.js';

// Definimos los días de la semana
const diasSemana = ["Lunes", "Martes", "Miércoles", "Jueves", "Viernes", "Sábado", "Domingo"];

// Agrupamos los animes/mangas por día
const horarioPorDia = diasSemana.map(dia => ({
  dia,
  eventos: horario.filter(evento => evento.dia.normalize('NFD').replace(/[\u0300-\u036f]/g, "").toLowerCase() === dia.normalize('NFD').replace(/[\u0300-\u036f]/g, "").toLowerCase())
}));
---

<div class="max-w-4xl mx-auto p-4">
  <h1 class="text-3xl font-bold text-center mb-6 text-indigo-600">Horario Semanal de Animes y Mangas</h1>
  
  <table class="w-full border-collapse table-auto text-sm">
    <thead>
      <tr class="bg-indigo-600 text-white">
        {diasSemana.map(dia => (
          <th class="py-2 px-4 border border-gray-300">{dia}</th>
        ))}
      </tr>
    </thead>
    <tbody>
      <tr>
        {horarioPorDia.map(({ eventos }) => (
          <td class="py-4 px-4 border border-gray-300 align-top">
            {eventos.length > 0 ? (
              eventos.map(evento => (
                <div
                  class={`mb-2 p-3 rounded-lg text-white font-semibold ${evento.tipo === "Anime" ? "bg-blue-500" : "bg-green-500"}`}
                >
                  <span class="block">{evento.nombre}</span>
                  <span class="block text-xs">{evento.hora}</span>
                </div>
              ))
            ) : (
              <div class="text-gray-500">No hay eventos</div>
            )}
          </td>
        ))}
      </tr>
    </tbody>
  </table>
</div>
